<!doctype html>
<html class="no-js" lang="ru">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Алфавитный указатель" href="genindex.html" /><link rel="search" title="Поиск" href="search.html" /><link rel="next" title="Расширения в Twig" href="advanced.html" /><link rel="prev" title="Twig для верстальщиков" href="templates.html" />

    <meta name="generator" content="sphinx-4.4.0, furo 2022.02.14.1"/>
        <title>Twig для программистов - документация Twig 3.0</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=a8f031f701c6af50c9919b48f173a5785af06fac" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=25ceb02ed1c46dc30f2321ff83e92799f69dfdb9" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  body[data-theme="dark"] {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
  @media (prefers-color-scheme: dark) {
    body:not([data-theme="light"]) {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }
</style></head>
  <body>
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">документация Twig 3.0</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">документация Twig 3.0</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder=Поиск name="q" aria-label="Поиск">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Вступление</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Установка</a></li>
<li class="toctree-l1"><a class="reference internal" href="templates.html">Twig для верстальщиков</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Twig для программистов</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced.html">Расширения в Twig</a></li>
<li class="toctree-l1"><a class="reference internal" href="internals.html">Twig изнутри</a></li>
<li class="toctree-l1"><a class="reference internal" href="deprecated.html">Deprecated Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes.html">Примеры</a></li>
<li class="toctree-l1"><a class="reference internal" href="coding_standards.html">Стандарты кодирования</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="tags/index.html">Tags</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="tags/apply.html"><code class="docutils literal notranslate"><span class="pre">apply</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tags/autoescape.html"><code class="docutils literal notranslate"><span class="pre">autoescape</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tags/block.html"><code class="docutils literal notranslate"><span class="pre">block</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tags/cache.html"><code class="docutils literal notranslate"><span class="pre">cache</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tags/deprecated.html"><code class="docutils literal notranslate"><span class="pre">deprecated</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tags/do.html"><code class="docutils literal notranslate"><span class="pre">do</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tags/embed.html"><code class="docutils literal notranslate"><span class="pre">embed</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tags/extends.html"><code class="docutils literal notranslate"><span class="pre">extends</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tags/flush.html"><code class="docutils literal notranslate"><span class="pre">flush</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tags/for.html"><code class="docutils literal notranslate"><span class="pre">for</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tags/from.html"><code class="docutils literal notranslate"><span class="pre">from</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tags/if.html"><code class="docutils literal notranslate"><span class="pre">if</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tags/import.html"><code class="docutils literal notranslate"><span class="pre">import</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tags/include.html"><code class="docutils literal notranslate"><span class="pre">include</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tags/macro.html"><code class="docutils literal notranslate"><span class="pre">macro</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tags/sandbox.html"><code class="docutils literal notranslate"><span class="pre">sandbox</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tags/set.html"><code class="docutils literal notranslate"><span class="pre">set</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tags/use.html"><code class="docutils literal notranslate"><span class="pre">use</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tags/verbatim.html"><code class="docutils literal notranslate"><span class="pre">verbatim</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tags/with.html"><code class="docutils literal notranslate"><span class="pre">with</span></code></a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="filters/index.html">Filters</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="filters/abs.html"><code class="docutils literal notranslate"><span class="pre">abs</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/batch.html"><code class="docutils literal notranslate"><span class="pre">batch</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/capitalize.html"><code class="docutils literal notranslate"><span class="pre">capitalize</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/column.html"><code class="docutils literal notranslate"><span class="pre">column</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/convert_encoding.html"><code class="docutils literal notranslate"><span class="pre">convert_encoding</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/country_name.html"><code class="docutils literal notranslate"><span class="pre">country_name</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/currency_name.html"><code class="docutils literal notranslate"><span class="pre">currency_name</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/currency_symbol.html"><code class="docutils literal notranslate"><span class="pre">currency_symbol</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/data_uri.html"><code class="docutils literal notranslate"><span class="pre">data_uri</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/date.html"><code class="docutils literal notranslate"><span class="pre">date</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/date_modify.html"><code class="docutils literal notranslate"><span class="pre">date_modify</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/default.html"><code class="docutils literal notranslate"><span class="pre">default</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/escape.html"><code class="docutils literal notranslate"><span class="pre">escape</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/filter.html"><code class="docutils literal notranslate"><span class="pre">filter</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/first.html"><code class="docutils literal notranslate"><span class="pre">first</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/format.html"><code class="docutils literal notranslate"><span class="pre">format</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/format_currency.html"><code class="docutils literal notranslate"><span class="pre">format_currency</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/format_date.html"><code class="docutils literal notranslate"><span class="pre">format_date</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/format_datetime.html"><code class="docutils literal notranslate"><span class="pre">format_datetime</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/format_number.html"><code class="docutils literal notranslate"><span class="pre">format_number</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/format_time.html"><code class="docutils literal notranslate"><span class="pre">format_time</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/html_to_markdown.html"><code class="docutils literal notranslate"><span class="pre">html_to_markdown</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/inline_css.html"><code class="docutils literal notranslate"><span class="pre">inline_css</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/inky_to_html.html"><code class="docutils literal notranslate"><span class="pre">inky_to_html</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/join.html"><code class="docutils literal notranslate"><span class="pre">join</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/json_encode.html"><code class="docutils literal notranslate"><span class="pre">json_encode</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/keys.html"><code class="docutils literal notranslate"><span class="pre">keys</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/language_name.html"><code class="docutils literal notranslate"><span class="pre">language_name</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/last.html"><code class="docutils literal notranslate"><span class="pre">last</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/length.html"><code class="docutils literal notranslate"><span class="pre">length</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/locale_name.html"><code class="docutils literal notranslate"><span class="pre">locale_name</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/lower.html"><code class="docutils literal notranslate"><span class="pre">lower</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/map.html"><code class="docutils literal notranslate"><span class="pre">map</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/markdown_to_html.html"><code class="docutils literal notranslate"><span class="pre">markdown_to_html</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/merge.html"><code class="docutils literal notranslate"><span class="pre">merge</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/nl2br.html"><code class="docutils literal notranslate"><span class="pre">nl2br</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/number_format.html"><code class="docutils literal notranslate"><span class="pre">number_format</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/raw.html"><code class="docutils literal notranslate"><span class="pre">raw</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/reduce.html"><code class="docutils literal notranslate"><span class="pre">reduce</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/replace.html"><code class="docutils literal notranslate"><span class="pre">replace</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/reverse.html"><code class="docutils literal notranslate"><span class="pre">reverse</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/round.html"><code class="docutils literal notranslate"><span class="pre">round</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/slice.html"><code class="docutils literal notranslate"><span class="pre">slice</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/slug.html"><code class="docutils literal notranslate"><span class="pre">slug</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/sort.html"><code class="docutils literal notranslate"><span class="pre">sort</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/spaceless.html"><code class="docutils literal notranslate"><span class="pre">spaceless</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/split.html"><code class="docutils literal notranslate"><span class="pre">split</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/striptags.html"><code class="docutils literal notranslate"><span class="pre">striptags</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/timezone_name.html"><code class="docutils literal notranslate"><span class="pre">timezone_name</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/title.html"><code class="docutils literal notranslate"><span class="pre">title</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/trim.html"><code class="docutils literal notranslate"><span class="pre">trim</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/u.html"><code class="docutils literal notranslate"><span class="pre">u</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/upper.html"><code class="docutils literal notranslate"><span class="pre">upper</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/url_encode.html"><code class="docutils literal notranslate"><span class="pre">url_encode</span></code></a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="functions/index.html">Functions</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="functions/attribute.html"><code class="docutils literal notranslate"><span class="pre">attribute</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="functions/block.html"><code class="docutils literal notranslate"><span class="pre">block</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="functions/constant.html"><code class="docutils literal notranslate"><span class="pre">constant</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="functions/cycle.html"><code class="docutils literal notranslate"><span class="pre">cycle</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="functions/date.html"><code class="docutils literal notranslate"><span class="pre">date</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="functions/dump.html"><code class="docutils literal notranslate"><span class="pre">dump</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="functions/html_classes.html"><code class="docutils literal notranslate"><span class="pre">html_classes</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="functions/include.html"><code class="docutils literal notranslate"><span class="pre">include</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="functions/max.html"><code class="docutils literal notranslate"><span class="pre">max</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="functions/min.html"><code class="docutils literal notranslate"><span class="pre">min</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="functions/parent.html"><code class="docutils literal notranslate"><span class="pre">parent</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="functions/random.html"><code class="docutils literal notranslate"><span class="pre">random</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="functions/range.html"><code class="docutils literal notranslate"><span class="pre">range</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="functions/source.html"><code class="docutils literal notranslate"><span class="pre">source</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="functions/country_timezones.html"><code class="docutils literal notranslate"><span class="pre">country_timezones</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="functions/template_from_string.html"><code class="docutils literal notranslate"><span class="pre">template_from_string</span></code></a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="tests/index.html">Tests</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="tests/constant.html"><code class="docutils literal notranslate"><span class="pre">constant</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tests/defined.html"><code class="docutils literal notranslate"><span class="pre">defined</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tests/divisibleby.html"><code class="docutils literal notranslate"><span class="pre">divisible</span> <span class="pre">by</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tests/empty.html"><code class="docutils literal notranslate"><span class="pre">empty</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tests/even.html"><code class="docutils literal notranslate"><span class="pre">even</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tests/iterable.html"><code class="docutils literal notranslate"><span class="pre">iterable</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tests/null.html"><code class="docutils literal notranslate"><span class="pre">null</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tests/odd.html"><code class="docutils literal notranslate"><span class="pre">odd</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tests/sameas.html"><code class="docutils literal notranslate"><span class="pre">same</span> <span class="pre">as</span></code></a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <div class="content-icon-container"><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <div class="section" id="twig">
<h1>Twig для программистов<a class="headerlink" href="#twig" title="Ссылка на этот заголовок">#</a></h1>
<p>This chapter describes the API to Twig and not the template language. It will
be most useful as reference to those implementing the template interface to
the application and not those who are creating Twig templates.</p>
<div class="section" id="basics">
<h2>Basics<a class="headerlink" href="#basics" title="Ссылка на этот заголовок">#</a></h2>
<p>Twig uses a central object called the <strong>environment</strong> (of class
<code class="docutils literal notranslate"><span class="pre">\Twig\Environment</span></code>). Instances of this class are used to store the
configuration and extensions, and are used to load templates.</p>
<p>Most applications create one <code class="docutils literal notranslate"><span class="pre">\Twig\Environment</span></code> object on application
initialization and use that to load templates. In some cases, it might be useful
to have multiple environments side by side, with different configurations.</p>
<p>The typical way to configure Twig to load templates for an application looks
roughly like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>require_once '/path/to/vendor/autoload.php';

$loader = new \Twig\Loader\FilesystemLoader('/path/to/templates');
$twig = new \Twig\Environment($loader, [
    'cache' =&gt; '/path/to/compilation_cache',
]);
</pre></div>
</div>
<p>This creates a template environment with a default configuration and a loader
that looks up templates in the <code class="docutils literal notranslate"><span class="pre">/path/to/templates/</span></code> directory. Different
loaders are available and you can also write your own if you want to load
templates from a database or other resources.</p>
<div class="admonition note">
<p class="admonition-title">Примечание</p>
<p>Notice that the second argument of the environment is an array of options.
The <code class="docutils literal notranslate"><span class="pre">cache</span></code> option is a compilation cache directory, where Twig caches
the compiled templates to avoid the parsing phase for sub-sequent
requests. It is very different from the cache you might want to add for
the evaluated templates. For such a need, you can use any available PHP
cache library.</p>
</div>
</div>
<div class="section" id="rendering-templates">
<h2>Rendering Templates<a class="headerlink" href="#rendering-templates" title="Ссылка на этот заголовок">#</a></h2>
<p>To load a template from a Twig environment, call the <code class="docutils literal notranslate"><span class="pre">load()</span></code> method which
returns a <code class="docutils literal notranslate"><span class="pre">\Twig\TemplateWrapper</span></code> instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$template = $twig-&gt;load('index.html');
</pre></div>
</div>
<p>To render the template with some variables, call the <code class="docutils literal notranslate"><span class="pre">render()</span></code> method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>echo $template-&gt;render(['the' =&gt; 'variables', 'go' =&gt; 'here']);
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Примечание</p>
<p>The <code class="docutils literal notranslate"><span class="pre">display()</span></code> method is a shortcut to output the rendered template.</p>
</div>
<p>You can also load and render the template in one fell swoop:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>echo $twig-&gt;render('index.html', ['the' =&gt; 'variables', 'go' =&gt; 'here']);
</pre></div>
</div>
<p>If a template defines blocks, they can be rendered individually via the
<code class="docutils literal notranslate"><span class="pre">renderBlock()</span></code> call:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>echo $template-&gt;renderBlock('block_name', ['the' =&gt; 'variables', 'go' =&gt; 'here']);
</pre></div>
</div>
</div>
<div class="section" id="environment-options">
<span id="id1"></span><h2>Environment Options<a class="headerlink" href="#environment-options" title="Ссылка на этот заголовок">#</a></h2>
<p>When creating a new <code class="docutils literal notranslate"><span class="pre">\Twig\Environment</span></code> instance, you can pass an array of
options as the constructor second argument:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$twig = new \Twig\Environment($loader, ['debug' =&gt; true]);
</pre></div>
</div>
<p>The following options are available:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">debug</span></code> <em>boolean</em></p>
<p>When set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, the generated templates have a
<code class="docutils literal notranslate"><span class="pre">__toString()</span></code> method that you can use to display the generated nodes
(default to <code class="docutils literal notranslate"><span class="pre">false</span></code>).</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">charset</span></code> <em>string</em> (defaults to <code class="docutils literal notranslate"><span class="pre">utf-8</span></code>)</p>
<p>The charset used by the templates.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">cache</span></code> <em>string</em> or <code class="docutils literal notranslate"><span class="pre">false</span></code></p>
<p>An absolute path where to store the compiled templates, or
<code class="docutils literal notranslate"><span class="pre">false</span></code> to disable caching (which is the default).</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">auto_reload</span></code> <em>boolean</em></p>
<p>When developing with Twig, it’s useful to recompile the
template whenever the source code changes. If you don’t provide a value for
the <code class="docutils literal notranslate"><span class="pre">auto_reload</span></code> option, it will be determined automatically based on the
<code class="docutils literal notranslate"><span class="pre">debug</span></code> value.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">strict_variables</span></code> <em>boolean</em></p>
<p>If set to <code class="docutils literal notranslate"><span class="pre">false</span></code>, Twig will silently ignore invalid
variables (variables and or attributes/methods that do not exist) and
replace them with a <code class="docutils literal notranslate"><span class="pre">null</span></code> value. When set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, Twig throws an
exception instead (default to <code class="docutils literal notranslate"><span class="pre">false</span></code>).</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">autoescape</span></code> <em>string</em></p>
<p>Sets the default auto-escaping strategy (<code class="docutils literal notranslate"><span class="pre">name</span></code>, <code class="docutils literal notranslate"><span class="pre">html</span></code>, <code class="docutils literal notranslate"><span class="pre">js</span></code>, <code class="docutils literal notranslate"><span class="pre">css</span></code>,
<code class="docutils literal notranslate"><span class="pre">url</span></code>, <code class="docutils literal notranslate"><span class="pre">html_attr</span></code>, or a PHP callback that takes the template «filename»
and returns the escaping strategy to use – the callback cannot be a function
name to avoid collision with built-in escaping strategies); set it to
<code class="docutils literal notranslate"><span class="pre">false</span></code> to disable auto-escaping. The <code class="docutils literal notranslate"><span class="pre">name</span></code> escaping strategy determines
the escaping strategy to use for a template based on the template filename
extension (this strategy does not incur any overhead at runtime as
auto-escaping is done at compilation time.)</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">optimizations</span></code> <em>integer</em></p>
<p>A flag that indicates which optimizations to apply
(default to <code class="docutils literal notranslate"><span class="pre">-1</span></code> – all optimizations are enabled; set it to <code class="docutils literal notranslate"><span class="pre">0</span></code> to
disable).</p>
</li>
</ul>
</div>
<div class="section" id="loaders">
<h2>Loaders<a class="headerlink" href="#loaders" title="Ссылка на этот заголовок">#</a></h2>
<p>Loaders are responsible for loading templates from a resource such as the file
system.</p>
<div class="section" id="compilation-cache">
<h3>Compilation Cache<a class="headerlink" href="#compilation-cache" title="Ссылка на этот заголовок">#</a></h3>
<p>All template loaders can cache the compiled templates on the filesystem for
future reuse. It speeds up Twig a lot as templates are only compiled once.</p>
</div>
<div class="section" id="built-in-loaders">
<h3>Built-in Loaders<a class="headerlink" href="#built-in-loaders" title="Ссылка на этот заголовок">#</a></h3>
<p>Here is a list of the built-in loaders:</p>
<div class="section" id="twig-loader-filesystemloader">
<h4><code class="docutils literal notranslate"><span class="pre">\Twig\Loader\FilesystemLoader</span></code><a class="headerlink" href="#twig-loader-filesystemloader" title="Ссылка на этот заголовок">#</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">\Twig\Loader\FilesystemLoader</span></code> loads templates from the file system. This loader
can find templates in folders on the file system and is the preferred way to
load them:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$loader = new \Twig\Loader\FilesystemLoader($templateDir);
</pre></div>
</div>
<p>It can also look for templates in an array of directories:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$loader = new \Twig\Loader\FilesystemLoader([$templateDir1, $templateDir2]);
</pre></div>
</div>
<p>With such a configuration, Twig will first look for templates in
<code class="docutils literal notranslate"><span class="pre">$templateDir1</span></code> and if they do not exist, it will fallback to look for them
in the <code class="docutils literal notranslate"><span class="pre">$templateDir2</span></code>.</p>
<p>You can add or prepend paths via the <code class="docutils literal notranslate"><span class="pre">addPath()</span></code> and <code class="docutils literal notranslate"><span class="pre">prependPath()</span></code>
methods:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$loader-&gt;addPath($templateDir3);
$loader-&gt;prependPath($templateDir4);
</pre></div>
</div>
<p>The filesystem loader also supports namespaced templates. This allows to group
your templates under different namespaces which have their own template paths.</p>
<p>When using the <code class="docutils literal notranslate"><span class="pre">setPaths()</span></code>, <code class="docutils literal notranslate"><span class="pre">addPath()</span></code>, and <code class="docutils literal notranslate"><span class="pre">prependPath()</span></code> methods,
specify the namespace as the second argument (when not specified, these
methods act on the «main» namespace):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$loader-&gt;addPath($templateDir, 'admin');
</pre></div>
</div>
<p>Namespaced templates can be accessed via the special
<code class="docutils literal notranslate"><span class="pre">@namespace_name/template_path</span></code> notation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$twig-&gt;render('@admin/index.html', []);
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">\Twig\Loader\FilesystemLoader</span></code> support absolute and relative paths. Using relative
paths is preferred as it makes the cache keys independent of the project root
directory (for instance, it allows warming the cache from a build server where
the directory might be different from the one used on production servers):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$loader = new \Twig\Loader\FilesystemLoader('templates', getcwd().'/..');
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Примечание</p>
<p>When not passing the root path as a second argument, Twig uses <code class="docutils literal notranslate"><span class="pre">getcwd()</span></code>
for relative paths.</p>
</div>
</div>
<div class="section" id="twig-loader-arrayloader">
<h4><code class="docutils literal notranslate"><span class="pre">\Twig\Loader\ArrayLoader</span></code><a class="headerlink" href="#twig-loader-arrayloader" title="Ссылка на этот заголовок">#</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">\Twig\Loader\ArrayLoader</span></code> loads a template from a PHP array. It is passed an
array of strings bound to template names:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$loader = new \Twig\Loader\ArrayLoader([
    'index.html' =&gt; 'Hello {{ name }}!',
]);
$twig = new \Twig\Environment($loader);

echo $twig-&gt;render('index.html', ['name' =&gt; 'Fabien']);
</pre></div>
</div>
<p>This loader is very useful for unit testing. It can also be used for small
projects where storing all templates in a single PHP file might make sense.</p>
<div class="admonition tip">
<p class="admonition-title">Совет</p>
<p>When using the <code class="docutils literal notranslate"><span class="pre">Array</span></code> loader with a cache mechanism, you should know that
a new cache key is generated each time a template content «changes» (the
cache key being the source code of the template). If you don’t want to see
your cache grows out of control, you need to take care of clearing the old
cache file by yourself.</p>
</div>
</div>
<div class="section" id="twig-loader-chainloader">
<h4><code class="docutils literal notranslate"><span class="pre">\Twig\Loader\ChainLoader</span></code><a class="headerlink" href="#twig-loader-chainloader" title="Ссылка на этот заголовок">#</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">\Twig\Loader\ChainLoader</span></code> delegates the loading of templates to other loaders:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$loader1 = new \Twig\Loader\ArrayLoader([
    'base.html' =&gt; '{% block content %}{% endblock %}',
]);
$loader2 = new \Twig\Loader\ArrayLoader([
    'index.html' =&gt; '{% extends "base.html" %}{% block content %}Hello {{ name }}{% endblock %}',
    'base.html'  =&gt; 'Will never be loaded',
]);

$loader = new \Twig\Loader\ChainLoader([$loader1, $loader2]);

$twig = new \Twig\Environment($loader);
</pre></div>
</div>
<p>When looking for a template, Twig tries each loader in turn and returns as soon
as the template is found. When rendering the <code class="docutils literal notranslate"><span class="pre">index.html</span></code> template from the
above example, Twig will load it with <code class="docutils literal notranslate"><span class="pre">$loader2</span></code> but the <code class="docutils literal notranslate"><span class="pre">base.html</span></code>
template will be loaded from <code class="docutils literal notranslate"><span class="pre">$loader1</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Примечание</p>
<p>You can also add loaders via the <code class="docutils literal notranslate"><span class="pre">addLoader()</span></code> method.</p>
</div>
</div>
</div>
<div class="section" id="create-your-own-loader">
<h3>Create your own Loader<a class="headerlink" href="#create-your-own-loader" title="Ссылка на этот заголовок">#</a></h3>
<p>All loaders implement the <code class="docutils literal notranslate"><span class="pre">\Twig\Loader\LoaderInterface</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>interface \Twig\Loader\LoaderInterface
{
    /**
     * Returns the source context for a given template logical name.
     *
     * @param string $name The template logical name
     *
     * @return \Twig\Source
     *
     * @throws \Twig\Error\LoaderError When $name is not found
     */
    public function getSourceContext($name);

    /**
     * Gets the cache key to use for the cache for a given template name.
     *
     * @param string $name The name of the template to load
     *
     * @return string The cache key
     *
     * @throws \Twig\Error\LoaderError When $name is not found
     */
    public function getCacheKey($name);

    /**
     * Returns true if the template is still fresh.
     *
     * @param string    $name The template name
     * @param timestamp $time The last modification time of the cached template
     *
     * @return bool    true if the template is fresh, false otherwise
     *
     * @throws \Twig\Error\LoaderError When $name is not found
     */
    public function isFresh($name, $time);

    /**
     * Check if we have the source code of a template, given its name.
     *
     * @param string $name The name of the template to check if we can load
     *
     * @return bool    If the template source code is handled by this loader or not
     */
    public function exists($name);
}
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">isFresh()</span></code> method must return <code class="docutils literal notranslate"><span class="pre">true</span></code> if the current cached template
is still fresh, given the last modification time, or <code class="docutils literal notranslate"><span class="pre">false</span></code> otherwise.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">getSourceContext()</span></code> method must return an instance of <code class="docutils literal notranslate"><span class="pre">\Twig\Source</span></code>.</p>
</div>
</div>
<div class="section" id="using-extensions">
<h2>Using Extensions<a class="headerlink" href="#using-extensions" title="Ссылка на этот заголовок">#</a></h2>
<p>Twig extensions are packages that add new features to Twig. Register an
extension via the <code class="docutils literal notranslate"><span class="pre">addExtension()</span></code> method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$twig-&gt;addExtension(new \Twig\Extension\SandboxExtension());
</pre></div>
</div>
<p>Twig comes bundled with the following extensions:</p>
<ul class="simple">
<li><p><em>TwigExtensionCoreExtension</em>: Defines all the core features of Twig.</p></li>
<li><p><em>TwigExtensionDebugExtension</em>: Defines the <code class="docutils literal notranslate"><span class="pre">dump</span></code> function to help debug
template variables.</p></li>
<li><p><em>TwigExtensionEscaperExtension</em>: Adds automatic output-escaping and the
possibility to escape/unescape blocks of code.</p></li>
<li><p><em>TwigExtensionSandboxExtension</em>: Adds a sandbox mode to the default Twig
environment, making it safe to evaluate untrusted code.</p></li>
<li><p><em>TwigExtensionProfilerExtension</em>: Enables the built-in Twig profiler.</p></li>
<li><p><em>TwigExtensionOptimizerExtension</em>: Optimizes the node tree before
compilation.</p></li>
<li><dl class="simple">
<dt><em>TwigExtensionStringLoaderExtension</em>: Defines the <code class="docutils literal notranslate"><span class="pre">template_from_string</span></code></dt><dd><p>function to allow loading templates from string in a template.</p>
</dd>
</dl>
</li>
</ul>
<p>The Core, Escaper, and Optimizer extensions are registered by default.</p>
</div>
<div class="section" id="built-in-extensions">
<h2>Built-in Extensions<a class="headerlink" href="#built-in-extensions" title="Ссылка на этот заголовок">#</a></h2>
<p>This section describes the features added by the built-in extensions.</p>
<div class="admonition tip">
<p class="admonition-title">Совет</p>
<p>Read the chapter about <a class="reference internal" href="advanced.html"><span class="doc">extending Twig</span></a> to learn how to
create your own extensions.</p>
</div>
<div class="section" id="core-extension">
<h3>Core Extension<a class="headerlink" href="#core-extension" title="Ссылка на этот заголовок">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">core</span></code> extension defines all the core features of Twig:</p>
<ul class="simple">
<li><p><a class="reference internal" href="tags/index.html"><span class="doc">Tags</span></a>;</p></li>
<li><p><a class="reference internal" href="filters/index.html"><span class="doc">Filters</span></a>;</p></li>
<li><p><a class="reference internal" href="functions/index.html"><span class="doc">Functions</span></a>;</p></li>
<li><p><a class="reference internal" href="tests/index.html"><span class="doc">Tests</span></a>.</p></li>
</ul>
</div>
<div class="section" id="escaper-extension">
<h3>Escaper Extension<a class="headerlink" href="#escaper-extension" title="Ссылка на этот заголовок">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">escaper</span></code> extension adds automatic output escaping to Twig. It defines a
tag, <code class="docutils literal notranslate"><span class="pre">autoescape</span></code>, and a filter, <code class="docutils literal notranslate"><span class="pre">raw</span></code>.</p>
<p>When creating the escaper extension, you can switch on or off the global
output escaping strategy:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$escaper = new \Twig\Extension\EscaperExtension('html');
$twig-&gt;addExtension($escaper);
</pre></div>
</div>
<p>If set to <code class="docutils literal notranslate"><span class="pre">html</span></code>, all variables in templates are escaped (using the <code class="docutils literal notranslate"><span class="pre">html</span></code>
escaping strategy), except those using the <code class="docutils literal notranslate"><span class="pre">raw</span></code> filter:</p>
<div class="highlight-twig notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">article.to_html</span><span class="o">|</span><span class="nf">raw</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
<p>You can also change the escaping mode locally by using the <code class="docutils literal notranslate"><span class="pre">autoescape</span></code> tag:</p>
<div class="highlight-twig notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">autoescape</span> <span class="s1">'html'</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    </span><span class="cp">{{</span> <span class="nv">var</span> <span class="cp">}}</span><span class="x"></span>
<span class="x">    </span><span class="cp">{{</span> <span class="nv">var</span><span class="o">|</span><span class="nf">raw</span> <span class="cp">}}</span><span class="x">      </span><span class="c">{# var won't be escaped #}</span><span class="x"></span>
<span class="x">    </span><span class="cp">{{</span> <span class="nv">var</span><span class="o">|</span><span class="nf">escape</span> <span class="cp">}}</span><span class="x">   </span><span class="c">{# var won't be double-escaped #}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">endautoescape</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Предупреждение</p>
<p>The <code class="docutils literal notranslate"><span class="pre">autoescape</span></code> tag has no effect on included files.</p>
</div>
<p>The escaping rules are implemented as follows:</p>
<ul>
<li><p>Literals (integers, booleans, arrays, …) used in the template directly as
variables or filter arguments are never automatically escaped:</p>
<div class="highlight-html+twig notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="s2">"Twig&lt;br/&gt;"</span> <span class="cp">}}</span> <span class="c">{# won't be escaped #}</span>

<span class="cp">{%</span> <span class="k">set</span> <span class="nv">text</span> <span class="o">=</span> <span class="s2">"Twig&lt;br/&gt;"</span> <span class="cp">%}</span>
<span class="cp">{{</span> <span class="nv">text</span> <span class="cp">}}</span> <span class="c">{# will be escaped #}</span>
</pre></div>
</div>
</li>
<li><p>Expressions which the result is a literal or a variable marked safe
are never automatically escaped:</p>
<div class="highlight-html+twig notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">foo</span> <span class="o">?</span> <span class="s2">"Twig&lt;br/&gt;"</span> <span class="o">:</span> <span class="s2">"&lt;br/&gt;Twig"</span> <span class="cp">}}</span> <span class="c">{# won't be escaped #}</span>

<span class="cp">{%</span> <span class="k">set</span> <span class="nv">text</span> <span class="o">=</span> <span class="s2">"Twig&lt;br/&gt;"</span> <span class="cp">%}</span>
<span class="cp">{{</span> <span class="kp">true</span> <span class="o">?</span> <span class="nv">text</span> <span class="o">:</span> <span class="s2">"&lt;br/&gt;Twig"</span> <span class="cp">}}</span> <span class="c">{# will be escaped #}</span>
<span class="cp">{{</span> <span class="kp">false</span> <span class="o">?</span> <span class="nv">text</span> <span class="o">:</span> <span class="s2">"&lt;br/&gt;Twig"</span> <span class="cp">}}</span> <span class="c">{# won't be escaped #}</span>

<span class="cp">{%</span> <span class="k">set</span> <span class="nv">text</span> <span class="o">=</span> <span class="s2">"Twig&lt;br/&gt;"</span> <span class="cp">%}</span>
<span class="cp">{{</span> <span class="nv">foo</span> <span class="o">?</span> <span class="nv">text</span><span class="o">|</span><span class="nf">raw</span> <span class="o">:</span> <span class="s2">"&lt;br/&gt;Twig"</span> <span class="cp">}}</span> <span class="c">{# won't be escaped #}</span>
</pre></div>
</div>
</li>
<li><p>Objects with a <code class="docutils literal notranslate"><span class="pre">__toString</span></code> method are converted to strings and
escaped. You can mark some classes and/or interfaces as being safe for some
strategies via <code class="docutils literal notranslate"><span class="pre">EscaperExtension::addSafeClass()</span></code>:</p>
<div class="highlight-twig notranslate"><div class="highlight"><pre><span></span><span class="x">// mark object of class Foo as safe for the HTML strategy</span>
<span class="x">$escaper-&gt;addSafeClass('Foo', ['html']);</span>

<span class="x">// mark object of interface Foo as safe for the HTML strategy</span>
<span class="x">$escaper-&gt;addSafeClass('FooInterface', ['html']);</span>

<span class="x">// mark object of class Foo as safe for the HTML and JS strategies</span>
<span class="x">$escaper-&gt;addSafeClass('Foo', ['html', 'js']);</span>

<span class="x">// mark object of class Foo as safe for all strategies</span>
<span class="x">$escaper-&gt;addSafeClass('Foo', ['all']);</span>
</pre></div>
</div>
</li>
<li><p>Escaping is applied before printing, after any other filter is applied:</p>
<div class="highlight-twig notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">var</span><span class="o">|</span><span class="nf">upper</span> <span class="cp">}}</span><span class="x"> </span><span class="c">{# is equivalent to {{ var|upper|escape }} #}</span><span class="x"></span>
</pre></div>
</div>
</li>
<li><p>The <cite>raw</cite> filter should only be used at the end of the filter chain:</p>
<div class="highlight-twig notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">var</span><span class="o">|</span><span class="nf">raw</span><span class="o">|</span><span class="nf">upper</span> <span class="cp">}}</span><span class="x"> </span><span class="c">{# will be escaped #}</span><span class="x"></span>

<span class="cp">{{</span> <span class="nv">var</span><span class="o">|</span><span class="nf">upper</span><span class="o">|</span><span class="nf">raw</span> <span class="cp">}}</span><span class="x"> </span><span class="c">{# won't be escaped #}</span><span class="x"></span>
</pre></div>
</div>
</li>
<li><p>Automatic escaping is not applied if the last filter in the chain is marked
safe for the current context (e.g. <code class="docutils literal notranslate"><span class="pre">html</span></code> or <code class="docutils literal notranslate"><span class="pre">js</span></code>). <code class="docutils literal notranslate"><span class="pre">escape</span></code> and
<code class="docutils literal notranslate"><span class="pre">escape('html')</span></code> are marked safe for HTML, <code class="docutils literal notranslate"><span class="pre">escape('js')</span></code> is marked
safe for JavaScript, <code class="docutils literal notranslate"><span class="pre">raw</span></code> is marked safe for everything.</p>
<div class="highlight-twig notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">autoescape</span> <span class="s1">'js'</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    </span><span class="cp">{{</span> <span class="nv">var</span><span class="o">|</span><span class="nf">escape</span><span class="o">(</span><span class="s1">'html'</span><span class="o">)</span> <span class="cp">}}</span><span class="x"> </span><span class="c">{# will be escaped for HTML and JavaScript #}</span><span class="x"></span>
<span class="x">    </span><span class="cp">{{</span> <span class="nv">var</span> <span class="cp">}}</span><span class="x"> </span><span class="c">{# will be escaped for JavaScript #}</span><span class="x"></span>
<span class="x">    </span><span class="cp">{{</span> <span class="nv">var</span><span class="o">|</span><span class="nf">escape</span><span class="o">(</span><span class="s1">'js'</span><span class="o">)</span> <span class="cp">}}</span><span class="x"> </span><span class="c">{# won't be double-escaped #}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">endautoescape</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</div>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Примечание</p>
<p>Note that autoescaping has some limitations as escaping is applied on
expressions after evaluation. For instance, when working with
concatenation, <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">foo|raw</span> <span class="pre">~</span> <span class="pre">bar</span> <span class="pre">}}</span></code> won’t give the expected result as
escaping is applied on the result of the concatenation, not on the
individual variables (so, the <code class="docutils literal notranslate"><span class="pre">raw</span></code> filter won’t have any effect here).</p>
</div>
</div>
<div class="section" id="sandbox-extension">
<h3>Sandbox Extension<a class="headerlink" href="#sandbox-extension" title="Ссылка на этот заголовок">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">sandbox</span></code> extension can be used to evaluate untrusted code. Access to
unsafe attributes and methods is prohibited. The sandbox security is managed
by a policy instance. By default, Twig comes with one policy class:
<code class="docutils literal notranslate"><span class="pre">\Twig\Sandbox\SecurityPolicy</span></code>. This class allows you to white-list some
tags, filters, properties, and methods:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$tags = ['if'];
$filters = ['upper'];
$methods = [
    'Article' =&gt; ['getTitle', 'getBody'],
];
$properties = [
    'Article' =&gt; ['title', 'body'],
];
$functions = ['range'];
$policy = new \Twig\Sandbox\SecurityPolicy($tags, $filters, $methods, $properties, $functions);
</pre></div>
</div>
<p>With the previous configuration, the security policy will only allow usage of
the <code class="docutils literal notranslate"><span class="pre">if</span></code> tag, and the <code class="docutils literal notranslate"><span class="pre">upper</span></code> filter. Moreover, the templates will only be
able to call the <code class="docutils literal notranslate"><span class="pre">getTitle()</span></code> and <code class="docutils literal notranslate"><span class="pre">getBody()</span></code> methods on <code class="docutils literal notranslate"><span class="pre">Article</span></code>
objects, and the <code class="docutils literal notranslate"><span class="pre">title</span></code> and <code class="docutils literal notranslate"><span class="pre">body</span></code> public properties. Everything else
won’t be allowed and will generate a <code class="docutils literal notranslate"><span class="pre">\Twig\Sandbox\SecurityError</span></code> exception.</p>
<p>The policy object is the first argument of the sandbox constructor:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$sandbox = new \Twig\Extension\SandboxExtension($policy);
$twig-&gt;addExtension($sandbox);
</pre></div>
</div>
<p>By default, the sandbox mode is disabled and should be enabled when including
untrusted template code by using the <code class="docutils literal notranslate"><span class="pre">sandbox</span></code> tag:</p>
<div class="highlight-twig notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">sandbox</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    </span><span class="cp">{%</span> <span class="k">include</span> <span class="s1">'user.html'</span> <span class="cp">%}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">endsandbox</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</div>
<p>You can sandbox all templates by passing <code class="docutils literal notranslate"><span class="pre">true</span></code> as the second argument of
the extension constructor:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$sandbox = new \Twig\Extension\SandboxExtension($policy, true);
</pre></div>
</div>
</div>
<div class="section" id="profiler-extension">
<h3>Profiler Extension<a class="headerlink" href="#profiler-extension" title="Ссылка на этот заголовок">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">profiler</span></code> extension enables a profiler for Twig templates; it should
only be used on your development machines as it adds some overhead:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$profile = new \Twig\Profiler\Profile();
$twig-&gt;addExtension(new \Twig\Extension\ProfilerExtension($profile));

$dumper = new \Twig\Profiler\Dumper\TextDumper();
echo $dumper-&gt;dump($profile);
</pre></div>
</div>
<p>A profile contains information about time and memory consumption for template,
block, and macro executions.</p>
<p>You can also dump the data in a <a class="reference external" href="https://blackfire.io/">Blackfire.io</a>
compatible format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$dumper = new \Twig\Profiler\Dumper\BlackfireDumper();
file_put_contents('/path/to/profile.prof', $dumper-&gt;dump($profile));
</pre></div>
</div>
<p>Upload the profile to visualize it (create a <a class="reference external" href="https://blackfire.io/signup?utm_source=twig&amp;utm_medium=doc&amp;utm_campaign=profiler">free account</a>
first):</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>blackfire --slot<span class="o">=</span><span class="m">7</span> upload /path/to/profile.prof
</pre></div>
</div>
</div>
<div class="section" id="optimizer-extension">
<h3>Optimizer Extension<a class="headerlink" href="#optimizer-extension" title="Ссылка на этот заголовок">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">optimizer</span></code> extension optimizes the node tree before compilation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$twig-&gt;addExtension(new \Twig\Extension\OptimizerExtension());
</pre></div>
</div>
<p>By default, all optimizations are turned on. You can select the ones you want
to enable by passing them to the constructor:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$optimizer = new \Twig\Extension\OptimizerExtension(\Twig\NodeVisitor\OptimizerNodeVisitor::OPTIMIZE_FOR);

$twig-&gt;addExtension($optimizer);
</pre></div>
</div>
<p>Twig supports the following optimizations:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">\Twig\NodeVisitor\OptimizerNodeVisitor::OPTIMIZE_ALL</span></code>, enables all optimizations
(this is the default value).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\Twig\NodeVisitor\OptimizerNodeVisitor::OPTIMIZE_NONE</span></code>, disables all optimizations.
This reduces the compilation time, but it can increase the execution time
and the consumed memory.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\Twig\NodeVisitor\OptimizerNodeVisitor::OPTIMIZE_FOR</span></code>, optimizes the <code class="docutils literal notranslate"><span class="pre">for</span></code> tag by
removing the <code class="docutils literal notranslate"><span class="pre">loop</span></code> variable creation whenever possible.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\Twig\NodeVisitor\OptimizerNodeVisitor::OPTIMIZE_RAW_FILTER</span></code>, removes the <code class="docutils literal notranslate"><span class="pre">raw</span></code>
filter whenever possible.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\Twig\NodeVisitor\OptimizerNodeVisitor::OPTIMIZE_VAR_ACCESS</span></code>, simplifies the creation
and access of variables in the compiled templates whenever possible.</p></li>
</ul>
</div>
</div>
<div class="section" id="exceptions">
<h2>Exceptions<a class="headerlink" href="#exceptions" title="Ссылка на этот заголовок">#</a></h2>
<p>Twig can throw exceptions:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">\Twig\Error\Error</span></code>: The base exception for all errors.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\Twig\Error\SyntaxError</span></code>: Thrown to tell the user that there is a problem with
the template syntax.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\Twig\Error\RuntimeError</span></code>: Thrown when an error occurs at runtime (when a filter
does not exist for instance).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\Twig\Error\LoaderError</span></code>: Thrown when an error occurs during template loading.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\Twig\Sandbox\SecurityError</span></code>: Thrown when an unallowed tag, filter, or
method is called in a sandboxed template.</p></li>
</ul>
</div>
</div>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="advanced.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Расширения в Twig</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="templates.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Twig для верстальщиков</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2021, OSCLab.com
            </div>
            Made with 
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Содержание
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Twig для программистов</a><ul>
<li><a class="reference internal" href="#basics">Basics</a></li>
<li><a class="reference internal" href="#rendering-templates">Rendering Templates</a></li>
<li><a class="reference internal" href="#environment-options">Environment Options</a></li>
<li><a class="reference internal" href="#loaders">Loaders</a><ul>
<li><a class="reference internal" href="#compilation-cache">Compilation Cache</a></li>
<li><a class="reference internal" href="#built-in-loaders">Built-in Loaders</a><ul>
<li><a class="reference internal" href="#twig-loader-filesystemloader"><code class="docutils literal notranslate"><span class="pre">\Twig\Loader\FilesystemLoader</span></code></a></li>
<li><a class="reference internal" href="#twig-loader-arrayloader"><code class="docutils literal notranslate"><span class="pre">\Twig\Loader\ArrayLoader</span></code></a></li>
<li><a class="reference internal" href="#twig-loader-chainloader"><code class="docutils literal notranslate"><span class="pre">\Twig\Loader\ChainLoader</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#create-your-own-loader">Create your own Loader</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-extensions">Using Extensions</a></li>
<li><a class="reference internal" href="#built-in-extensions">Built-in Extensions</a><ul>
<li><a class="reference internal" href="#core-extension">Core Extension</a></li>
<li><a class="reference internal" href="#escaper-extension">Escaper Extension</a></li>
<li><a class="reference internal" href="#sandbox-extension">Sandbox Extension</a></li>
<li><a class="reference internal" href="#profiler-extension">Profiler Extension</a></li>
<li><a class="reference internal" href="#optimizer-extension">Optimizer Extension</a></li>
</ul>
</li>
<li><a class="reference internal" href="#exceptions">Exceptions</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/scripts/furo.js"></script>
    <script src="_static/translations.js"></script>
    </body>
</html>