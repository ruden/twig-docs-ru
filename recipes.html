<!doctype html>
<html class="no-js" lang="ru">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Алфавитный указатель" href="genindex.html" /><link rel="search" title="Поиск" href="search.html" /><link rel="next" title="Стандарты кодирования" href="coding_standards.html" /><link rel="prev" title="Deprecated Features" href="deprecated.html" />

    <!-- Generated with Sphinx 7.1.2 and Furo 2023.07.26 -->
        <title>Примеры - документация Twig 3.0</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=362ab14a" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">документация Twig 3.0</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">документация Twig 3.0</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Поиск" name="q" aria-label="Поиск">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Вступление</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Установка</a></li>
<li class="toctree-l1"><a class="reference internal" href="templates.html">Twig для верстальщиков</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">Twig для программистов</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced.html">Расширения в Twig</a></li>
<li class="toctree-l1"><a class="reference internal" href="internals.html">Twig изнутри</a></li>
<li class="toctree-l1"><a class="reference internal" href="deprecated.html">Deprecated Features</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Примеры</a></li>
<li class="toctree-l1"><a class="reference internal" href="coding_standards.html">Стандарты кодирования</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="tags/index.html">Tags</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Tags</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="tags/apply.html"><code class="docutils literal notranslate"><span class="pre">apply</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tags/autoescape.html"><code class="docutils literal notranslate"><span class="pre">autoescape</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tags/block.html"><code class="docutils literal notranslate"><span class="pre">block</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tags/cache.html"><code class="docutils literal notranslate"><span class="pre">cache</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tags/deprecated.html"><code class="docutils literal notranslate"><span class="pre">deprecated</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tags/do.html"><code class="docutils literal notranslate"><span class="pre">do</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tags/embed.html"><code class="docutils literal notranslate"><span class="pre">embed</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tags/extends.html"><code class="docutils literal notranslate"><span class="pre">extends</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tags/flush.html"><code class="docutils literal notranslate"><span class="pre">flush</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tags/for.html"><code class="docutils literal notranslate"><span class="pre">for</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tags/from.html"><code class="docutils literal notranslate"><span class="pre">from</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tags/if.html"><code class="docutils literal notranslate"><span class="pre">if</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tags/import.html"><code class="docutils literal notranslate"><span class="pre">import</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tags/include.html"><code class="docutils literal notranslate"><span class="pre">include</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tags/macro.html"><code class="docutils literal notranslate"><span class="pre">macro</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tags/sandbox.html"><code class="docutils literal notranslate"><span class="pre">sandbox</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tags/set.html"><code class="docutils literal notranslate"><span class="pre">set</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tags/use.html"><code class="docutils literal notranslate"><span class="pre">use</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tags/verbatim.html"><code class="docutils literal notranslate"><span class="pre">verbatim</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tags/with.html"><code class="docutils literal notranslate"><span class="pre">with</span></code></a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="filters/index.html">Filters</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Filters</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="filters/abs.html"><code class="docutils literal notranslate"><span class="pre">abs</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/batch.html"><code class="docutils literal notranslate"><span class="pre">batch</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/capitalize.html"><code class="docutils literal notranslate"><span class="pre">capitalize</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/column.html"><code class="docutils literal notranslate"><span class="pre">column</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/convert_encoding.html"><code class="docutils literal notranslate"><span class="pre">convert_encoding</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/country_name.html"><code class="docutils literal notranslate"><span class="pre">country_name</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/currency_name.html"><code class="docutils literal notranslate"><span class="pre">currency_name</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/currency_symbol.html"><code class="docutils literal notranslate"><span class="pre">currency_symbol</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/data_uri.html"><code class="docutils literal notranslate"><span class="pre">data_uri</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/date.html"><code class="docutils literal notranslate"><span class="pre">date</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/date_modify.html"><code class="docutils literal notranslate"><span class="pre">date_modify</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/default.html"><code class="docutils literal notranslate"><span class="pre">default</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/escape.html"><code class="docutils literal notranslate"><span class="pre">escape</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/filter.html"><code class="docutils literal notranslate"><span class="pre">filter</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/first.html"><code class="docutils literal notranslate"><span class="pre">first</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/format.html"><code class="docutils literal notranslate"><span class="pre">format</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/format_currency.html"><code class="docutils literal notranslate"><span class="pre">format_currency</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/format_date.html"><code class="docutils literal notranslate"><span class="pre">format_date</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/format_datetime.html"><code class="docutils literal notranslate"><span class="pre">format_datetime</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/format_number.html"><code class="docutils literal notranslate"><span class="pre">format_number</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/format_time.html"><code class="docutils literal notranslate"><span class="pre">format_time</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/html_to_markdown.html"><code class="docutils literal notranslate"><span class="pre">html_to_markdown</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/inline_css.html"><code class="docutils literal notranslate"><span class="pre">inline_css</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/inky_to_html.html"><code class="docutils literal notranslate"><span class="pre">inky_to_html</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/join.html"><code class="docutils literal notranslate"><span class="pre">join</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/json_encode.html"><code class="docutils literal notranslate"><span class="pre">json_encode</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/keys.html"><code class="docutils literal notranslate"><span class="pre">keys</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/language_name.html"><code class="docutils literal notranslate"><span class="pre">language_name</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/last.html"><code class="docutils literal notranslate"><span class="pre">last</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/length.html"><code class="docutils literal notranslate"><span class="pre">length</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/locale_name.html"><code class="docutils literal notranslate"><span class="pre">locale_name</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/lower.html"><code class="docutils literal notranslate"><span class="pre">lower</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/map.html"><code class="docutils literal notranslate"><span class="pre">map</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/markdown_to_html.html"><code class="docutils literal notranslate"><span class="pre">markdown_to_html</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/merge.html"><code class="docutils literal notranslate"><span class="pre">merge</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/nl2br.html"><code class="docutils literal notranslate"><span class="pre">nl2br</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/number_format.html"><code class="docutils literal notranslate"><span class="pre">number_format</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/raw.html"><code class="docutils literal notranslate"><span class="pre">raw</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/reduce.html"><code class="docutils literal notranslate"><span class="pre">reduce</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/replace.html"><code class="docutils literal notranslate"><span class="pre">replace</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/reverse.html"><code class="docutils literal notranslate"><span class="pre">reverse</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/round.html"><code class="docutils literal notranslate"><span class="pre">round</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/slice.html"><code class="docutils literal notranslate"><span class="pre">slice</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/slug.html"><code class="docutils literal notranslate"><span class="pre">slug</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/sort.html"><code class="docutils literal notranslate"><span class="pre">sort</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/spaceless.html"><code class="docutils literal notranslate"><span class="pre">spaceless</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/split.html"><code class="docutils literal notranslate"><span class="pre">split</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/striptags.html"><code class="docutils literal notranslate"><span class="pre">striptags</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/timezone_name.html"><code class="docutils literal notranslate"><span class="pre">timezone_name</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/title.html"><code class="docutils literal notranslate"><span class="pre">title</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/trim.html"><code class="docutils literal notranslate"><span class="pre">trim</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/u.html"><code class="docutils literal notranslate"><span class="pre">u</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/upper.html"><code class="docutils literal notranslate"><span class="pre">upper</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="filters/url_encode.html"><code class="docutils literal notranslate"><span class="pre">url_encode</span></code></a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="functions/index.html">Functions</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Functions</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="functions/attribute.html"><code class="docutils literal notranslate"><span class="pre">attribute</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="functions/block.html"><code class="docutils literal notranslate"><span class="pre">block</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="functions/constant.html"><code class="docutils literal notranslate"><span class="pre">constant</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="functions/cycle.html"><code class="docutils literal notranslate"><span class="pre">cycle</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="functions/date.html"><code class="docutils literal notranslate"><span class="pre">date</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="functions/dump.html"><code class="docutils literal notranslate"><span class="pre">dump</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="functions/html_classes.html"><code class="docutils literal notranslate"><span class="pre">html_classes</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="functions/include.html"><code class="docutils literal notranslate"><span class="pre">include</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="functions/max.html"><code class="docutils literal notranslate"><span class="pre">max</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="functions/min.html"><code class="docutils literal notranslate"><span class="pre">min</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="functions/parent.html"><code class="docutils literal notranslate"><span class="pre">parent</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="functions/random.html"><code class="docutils literal notranslate"><span class="pre">random</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="functions/range.html"><code class="docutils literal notranslate"><span class="pre">range</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="functions/source.html"><code class="docutils literal notranslate"><span class="pre">source</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="functions/country_timezones.html"><code class="docutils literal notranslate"><span class="pre">country_timezones</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="functions/template_from_string.html"><code class="docutils literal notranslate"><span class="pre">template_from_string</span></code></a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="tests/index.html">Tests</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Tests</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="tests/constant.html"><code class="docutils literal notranslate"><span class="pre">constant</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tests/defined.html"><code class="docutils literal notranslate"><span class="pre">defined</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tests/divisibleby.html"><code class="docutils literal notranslate"><span class="pre">divisible</span> <span class="pre">by</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tests/empty.html"><code class="docutils literal notranslate"><span class="pre">empty</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tests/even.html"><code class="docutils literal notranslate"><span class="pre">even</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tests/iterable.html"><code class="docutils literal notranslate"><span class="pre">iterable</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tests/null.html"><code class="docutils literal notranslate"><span class="pre">null</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tests/odd.html"><code class="docutils literal notranslate"><span class="pre">odd</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tests/sameas.html"><code class="docutils literal notranslate"><span class="pre">same</span> <span class="pre">as</span></code></a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="id1">
<h1>Примеры<a class="headerlink" href="#id1" title="Permalink to this heading">#</a></h1>
<section id="displaying-deprecation-notices">
<span id="deprecation-notices"></span><h2>Displaying Deprecation Notices<a class="headerlink" href="#displaying-deprecation-notices" title="Permalink to this heading">#</a></h2>
<p>Deprecated features generate deprecation notices (via a call to the
<code class="docutils literal notranslate"><span class="pre">trigger_error()</span></code> PHP function). By default, they are silenced and never
displayed nor logged.</p>
<p>To remove all deprecated feature usages from your templates, write and run a
script along the lines of the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>require_once __DIR__.&#39;/vendor/autoload.php&#39;;

$twig = create_your_twig_env();

$deprecations = new \Twig\Util\DeprecationCollector($twig);

print_r($deprecations-&gt;collectDir(__DIR__.&#39;/templates&#39;));
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">collectDir()</span></code> method compiles all templates found in a directory,
catches deprecation notices, and return them.</p>
<div class="admonition tip">
<p class="admonition-title">Совет</p>
<p>If your templates are not stored on the filesystem, use the <code class="docutils literal notranslate"><span class="pre">collect()</span></code>
method instead. <code class="docutils literal notranslate"><span class="pre">collect()</span></code> takes a <code class="docutils literal notranslate"><span class="pre">Traversable</span></code> which must return
template names as keys and template contents as values (as done by
<code class="docutils literal notranslate"><span class="pre">\Twig\Util\TemplateDirIterator</span></code>).</p>
</div>
<p>However, this code won’t find all deprecations (like using deprecated some Twig
classes). To catch all notices, register a custom error handler like the one
below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$deprecations = [];
set_error_handler(function ($type, $msg) use (&amp;$deprecations) {
    if (E_USER_DEPRECATED === $type) {
        $deprecations[] = $msg;
    }
});

// run your application

print_r($deprecations);
</pre></div>
</div>
<p>Note that most deprecation notices are triggered during <strong>compilation</strong>, so
they won’t be generated when templates are already cached.</p>
<div class="admonition tip">
<p class="admonition-title">Совет</p>
<p>If you want to manage the deprecation notices from your PHPUnit tests, have
a look at the <a class="reference external" href="https://github.com/symfony/phpunit-bridge">symfony/phpunit-bridge</a> package, which eases the
process.</p>
</div>
</section>
<section id="making-a-layout-conditional">
<h2>Making a Layout conditional<a class="headerlink" href="#making-a-layout-conditional" title="Permalink to this heading">#</a></h2>
<p>Working with Ajax means that the same content is sometimes displayed as is,
and sometimes decorated with a layout. As Twig layout template names can be
any valid expression, you can pass a variable that evaluates to <code class="docutils literal notranslate"><span class="pre">true</span></code> when
the request is made via Ajax and choose the layout accordingly:</p>
<div class="highlight-twig notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">extends</span> <span class="nv">request.ajax</span> <span class="o">?</span> <span class="s2">&quot;base_ajax.html&quot;</span> <span class="o">:</span> <span class="s2">&quot;base.html&quot;</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>
<span class="x">    This is the content to be displayed.</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</pre></div>
</div>
</section>
<section id="making-an-include-dynamic">
<h2>Making an Include dynamic<a class="headerlink" href="#making-an-include-dynamic" title="Permalink to this heading">#</a></h2>
<p>When including a template, its name does not need to be a string. For
instance, the name can depend on the value of a variable:</p>
<div class="highlight-twig notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">include</span> <span class="nv">var</span> <span class="o">~</span> <span class="s1">&#39;_foo.html&#39;</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">var</span></code> evaluates to <code class="docutils literal notranslate"><span class="pre">index</span></code>, the <code class="docutils literal notranslate"><span class="pre">index_foo.html</span></code> template will be
rendered.</p>
<p>As a matter of fact, the template name can be any valid expression, such as
the following:</p>
<div class="highlight-twig notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">include</span> <span class="nv">var</span><span class="o">|</span><span class="nf">default</span><span class="o">(</span><span class="s1">&#39;index&#39;</span><span class="o">)</span> <span class="o">~</span> <span class="s1">&#39;_foo.html&#39;</span> <span class="cp">%}</span>
</pre></div>
</div>
</section>
<section id="overriding-a-template-that-also-extends-itself">
<h2>Overriding a Template that also extends itself<a class="headerlink" href="#overriding-a-template-that-also-extends-itself" title="Permalink to this heading">#</a></h2>
<p>A template can be customized in two different ways:</p>
<ul class="simple">
<li><p><em>Inheritance</em>: A template <em>extends</em> a parent template and overrides some
blocks;</p></li>
<li><p><em>Replacement</em>: If you use the filesystem loader, Twig loads the first
template it finds in a list of configured directories; a template found in a
directory <em>replaces</em> another one from a directory further in the list.</p></li>
</ul>
<p>But how do you combine both: <em>replace</em> a template that also extends itself
(aka a template in a directory further in the list)?</p>
<p>Let’s say that your templates are loaded from both <code class="docutils literal notranslate"><span class="pre">.../templates/mysite</span></code>
and <code class="docutils literal notranslate"><span class="pre">.../templates/default</span></code> in this order. The <code class="docutils literal notranslate"><span class="pre">page.twig</span></code> template,
stored in <code class="docutils literal notranslate"><span class="pre">.../templates/default</span></code> reads as follows:</p>
<div class="highlight-twig notranslate"><div class="highlight"><pre><span></span><span class="c">{# page.twig #}</span>
<span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&quot;layout.twig&quot;</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>You can replace this template by putting a file with the same name in
<code class="docutils literal notranslate"><span class="pre">.../templates/mysite</span></code>. And if you want to extend the original template, you
might be tempted to write the following:</p>
<div class="highlight-twig notranslate"><div class="highlight"><pre><span></span><span class="c">{# page.twig in .../templates/mysite #}</span>
<span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&quot;page.twig&quot;</span> <span class="cp">%}</span><span class="x"> </span><span class="c">{# from .../templates/default #}</span>
</pre></div>
</div>
<p>However, this will not work as Twig will always load the template from
<code class="docutils literal notranslate"><span class="pre">.../templates/mysite</span></code>.</p>
<p>It turns out it is possible to get this to work, by adding a directory right
at the end of your template directories, which is the parent of all of the
other directories: <code class="docutils literal notranslate"><span class="pre">.../templates</span></code> in our case. This has the effect of
making every template file within our system uniquely addressable. Most of the
time you will use the «normal» paths, but in the special case of wanting to
extend a template with an overriding version of itself we can reference its
parent’s full, unambiguous template path in the extends tag:</p>
<div class="highlight-twig notranslate"><div class="highlight"><pre><span></span><span class="c">{# page.twig in .../templates/mysite #}</span>
<span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&quot;default/page.twig&quot;</span> <span class="cp">%}</span><span class="x"> </span><span class="c">{# from .../templates #}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Примечание</p>
<p>This recipe was inspired by the following Django wiki page:
<a class="reference external" href="https://code.djangoproject.com/wiki/ExtendingTemplates">https://code.djangoproject.com/wiki/ExtendingTemplates</a></p>
</div>
</section>
<section id="customizing-the-syntax">
<h2>Customizing the Syntax<a class="headerlink" href="#customizing-the-syntax" title="Permalink to this heading">#</a></h2>
<p>Twig allows some syntax customization for the block delimiters. It’s <strong>not</strong>
recommended to use this feature as templates will be tied with your custom
syntax. But for specific projects, it can make sense to change the defaults.</p>
<p>To change the block delimiters, you need to create your own lexer object:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$twig = new \Twig\Environment(...);

$lexer = new \Twig\Lexer($twig, [
    &#39;tag_comment&#39;   =&gt; [&#39;{#&#39;, &#39;#}&#39;],
    &#39;tag_block&#39;     =&gt; [&#39;{%&#39;, &#39;%}&#39;],
    &#39;tag_variable&#39;  =&gt; [&#39;{{&#39;, &#39;}}&#39;],
    &#39;interpolation&#39; =&gt; [&#39;#{&#39;, &#39;}&#39;],
]);
$twig-&gt;setLexer($lexer);
</pre></div>
</div>
<p>Here are some configuration example that simulates some other template engines
syntax:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>// Ruby erb syntax
$lexer = new \Twig\Lexer($twig, [
    &#39;tag_comment&#39;  =&gt; [&#39;&lt;%#&#39;, &#39;%&gt;&#39;],
    &#39;tag_block&#39;    =&gt; [&#39;&lt;%&#39;, &#39;%&gt;&#39;],
    &#39;tag_variable&#39; =&gt; [&#39;&lt;%=&#39;, &#39;%&gt;&#39;],
]);

// SGML Comment Syntax
$lexer = new \Twig\Lexer($twig, [
    &#39;tag_comment&#39;  =&gt; [&#39;&lt;!--#&#39;, &#39;--&gt;&#39;],
    &#39;tag_block&#39;    =&gt; [&#39;&lt;!--&#39;, &#39;--&gt;&#39;],
    &#39;tag_variable&#39; =&gt; [&#39;${&#39;, &#39;}&#39;],
]);

// Smarty like
$lexer = new \Twig\Lexer($twig, [
    &#39;tag_comment&#39;  =&gt; [&#39;{*&#39;, &#39;*}&#39;],
    &#39;tag_block&#39;    =&gt; [&#39;{&#39;, &#39;}&#39;],
    &#39;tag_variable&#39; =&gt; [&#39;{$&#39;, &#39;}&#39;],
]);
</pre></div>
</div>
</section>
<section id="using-dynamic-object-properties">
<h2>Using dynamic Object Properties<a class="headerlink" href="#using-dynamic-object-properties" title="Permalink to this heading">#</a></h2>
<p>When Twig encounters a variable like <code class="docutils literal notranslate"><span class="pre">article.title</span></code>, it tries to find a
<code class="docutils literal notranslate"><span class="pre">title</span></code> public property in the <code class="docutils literal notranslate"><span class="pre">article</span></code> object.</p>
<p>It also works if the property does not exist but is rather defined dynamically
thanks to the magic <code class="docutils literal notranslate"><span class="pre">__get()</span></code> method; you need to also implement the
<code class="docutils literal notranslate"><span class="pre">__isset()</span></code> magic method like shown in the following snippet of code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>class Article
{
    public function __get($name)
    {
        if (&#39;title&#39; == $name) {
            return &#39;The title&#39;;
        }

        // throw some kind of error
    }

    public function __isset($name)
    {
        if (&#39;title&#39; == $name) {
            return true;
        }

        return false;
    }
}
</pre></div>
</div>
</section>
<section id="accessing-the-parent-context-in-nested-loops">
<h2>Accessing the parent Context in Nested Loops<a class="headerlink" href="#accessing-the-parent-context-in-nested-loops" title="Permalink to this heading">#</a></h2>
<p>Sometimes, when using nested loops, you need to access the parent context. The
parent context is always accessible via the <code class="docutils literal notranslate"><span class="pre">loop.parent</span></code> variable. For
instance, if you have the following template data:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$data = [
    &#39;topics&#39; =&gt; [
        &#39;topic1&#39; =&gt; [&#39;Message 1 of topic 1&#39;, &#39;Message 2 of topic 1&#39;],
        &#39;topic2&#39; =&gt; [&#39;Message 1 of topic 2&#39;, &#39;Message 2 of topic 2&#39;],
    ],
];
</pre></div>
</div>
<p>And the following template to display all messages in all topics:</p>
<div class="highlight-twig notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">topic</span><span class="o">,</span> <span class="nv">messages</span> <span class="k">in</span> <span class="nv">topics</span> <span class="cp">%}</span>
<span class="x">    * </span><span class="cp">{{</span> <span class="nb">loop</span><span class="nv">.index</span> <span class="cp">}}</span><span class="x">: </span><span class="cp">{{</span> <span class="nv">topic</span> <span class="cp">}}</span>
<span class="x">  </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">message</span> <span class="k">in</span> <span class="nv">messages</span> <span class="cp">%}</span>
<span class="x">      - </span><span class="cp">{{</span> <span class="nb">loop</span><span class="nv">.parent.loop.index</span> <span class="cp">}}</span><span class="x">.</span><span class="cp">{{</span> <span class="nb">loop</span><span class="nv">.index</span> <span class="cp">}}</span><span class="x">: </span><span class="cp">{{</span> <span class="nv">message</span> <span class="cp">}}</span>
<span class="x">  </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>The output will be similar to:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>* 1: topic1
  - 1.1: The message 1 of topic 1
  - 1.2: The message 2 of topic 1
* 2: topic2
  - 2.1: The message 1 of topic 2
  - 2.2: The message 2 of topic 2
</pre></div>
</div>
<p>In the inner loop, the <code class="docutils literal notranslate"><span class="pre">loop.parent</span></code> variable is used to access the outer
context. So, the index of the current <code class="docutils literal notranslate"><span class="pre">topic</span></code> defined in the outer for loop
is accessible via the <code class="docutils literal notranslate"><span class="pre">loop.parent.loop.index</span></code> variable.</p>
</section>
<section id="defining-undefined-functions-filters-and-tags-on-the-fly">
<h2>Defining undefined Functions, Filters, and Tags on the Fly<a class="headerlink" href="#defining-undefined-functions-filters-and-tags-on-the-fly" title="Permalink to this heading">#</a></h2>
<div class="versionadded">
<p><span class="versionmodified added">Добавлено в версии 3.2: </span>The <code class="docutils literal notranslate"><span class="pre">registerUndefinedTokenParserCallback()</span></code> method was added in Twig
3.2.</p>
</div>
<p>When a function/filter/tag is not defined, Twig defaults to throw a
<code class="docutils literal notranslate"><span class="pre">\Twig\Error\SyntaxError</span></code> exception. However, it can also call a <a class="reference external" href="https://www.php.net/manual/en/function.is-callable.php">callback</a>
(any valid PHP callable) which should return a function/filter/tag.</p>
<p>For tags, register callbacks with <code class="docutils literal notranslate"><span class="pre">registerUndefinedTokenParserCallback()</span></code>.
For filters, register callbacks with <code class="docutils literal notranslate"><span class="pre">registerUndefinedFilterCallback()</span></code>.
For functions, use <code class="docutils literal notranslate"><span class="pre">registerUndefinedFunctionCallback()</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>// auto-register all native PHP functions as Twig functions
// NEVER do this in a project as it&#39;s NOT secure
$twig-&gt;registerUndefinedFunctionCallback(function ($name) {
    if (function_exists($name)) {
        return new \Twig\TwigFunction($name, $name);
    }

    return false;
});
</pre></div>
</div>
<p>If the callable is not able to return a valid function/filter/tag, it must
return <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
<p>If you register more than one callback, Twig will call them in turn until one
does not return <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
<div class="admonition tip">
<p class="admonition-title">Совет</p>
<p>As the resolution of functions/filters/tags is done during compilation,
there is no overhead when registering these callbacks.</p>
</div>
</section>
<section id="validating-the-template-syntax">
<h2>Validating the Template Syntax<a class="headerlink" href="#validating-the-template-syntax" title="Permalink to this heading">#</a></h2>
<p>When template code is provided by a third-party (through a web interface for
instance), it might be interesting to validate the template syntax before
saving it. If the template code is stored in a <code class="docutils literal notranslate"><span class="pre">$template</span></code> variable, here is
how you can do it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>try {
    $twig-&gt;parse($twig-&gt;tokenize(new \Twig\Source($template)));

    // the $template is valid
} catch (\Twig\Error\SyntaxError $e) {
    // $template contains one or more syntax errors
}
</pre></div>
</div>
<p>If you iterate over a set of files, you can pass the filename to the
<code class="docutils literal notranslate"><span class="pre">tokenize()</span></code> method to get the filename in the exception message:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>foreach ($files as $file) {
    try {
        $twig-&gt;parse($twig-&gt;tokenize(new \Twig\Source($template, $file-&gt;getFilename(), $file)));

        // the $template is valid
    } catch (\Twig\Error\SyntaxError $e) {
        // $template contains one or more syntax errors
    }
}
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Примечание</p>
<p>This method won’t catch any sandbox policy violations because the policy
is enforced during template rendering (as Twig needs the context for some
checks like allowed methods on objects).</p>
</div>
</section>
<section id="refreshing-modified-templates-when-opcache-or-apc-is-enabled">
<h2>Refreshing modified Templates when OPcache or APC is enabled<a class="headerlink" href="#refreshing-modified-templates-when-opcache-or-apc-is-enabled" title="Permalink to this heading">#</a></h2>
<p>When using OPcache with <code class="docutils literal notranslate"><span class="pre">opcache.validate_timestamps</span></code> set to <code class="docutils literal notranslate"><span class="pre">0</span></code> or APC
with <code class="docutils literal notranslate"><span class="pre">apc.stat</span></code> set to <code class="docutils literal notranslate"><span class="pre">0</span></code> and Twig cache enabled, clearing the template
cache won’t update the cache.</p>
<p>To get around this, force Twig to invalidate the bytecode cache:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$twig = new \Twig\Environment($loader, [
    &#39;cache&#39; =&gt; new \Twig\Cache\FilesystemCache(&#39;/some/cache/path&#39;, \Twig\Cache\FilesystemCache::FORCE_BYTECODE_INVALIDATION),
    // ...
]);
</pre></div>
</div>
</section>
<section id="reusing-a-stateful-node-visitor">
<h2>Reusing a stateful Node Visitor<a class="headerlink" href="#reusing-a-stateful-node-visitor" title="Permalink to this heading">#</a></h2>
<p>When attaching a visitor to a <code class="docutils literal notranslate"><span class="pre">\Twig\Environment</span></code> instance, Twig uses it to
visit <em>all</em> templates it compiles. If you need to keep some state information
around, you probably want to reset it when visiting a new template.</p>
<p>This can be achieved with the following code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>protected $someTemplateState = [];

public function enterNode(\Twig\Node\Node $node, \Twig\Environment $env)
{
    if ($node instanceof \Twig\Node\ModuleNode) {
        // reset the state as we are entering a new template
        $this-&gt;someTemplateState = [];
    }

    // ...

    return $node;
}
</pre></div>
</div>
</section>
<section id="using-a-database-to-store-templates">
<h2>Using a Database to store Templates<a class="headerlink" href="#using-a-database-to-store-templates" title="Permalink to this heading">#</a></h2>
<p>If you are developing a CMS, templates are usually stored in a database. This
recipe gives you a simple PDO template loader you can use as a starting point
for your own.</p>
<p>First, let’s create a temporary in-memory SQLite3 database to work with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$dbh = new PDO(&#39;sqlite::memory:&#39;);
$dbh-&gt;exec(&#39;CREATE TABLE templates (name STRING, source STRING, last_modified INTEGER)&#39;);
$base = &#39;{% block content %}{% endblock %}&#39;;
$index = &#39;
{% extends &quot;base.twig&quot; %}
{% block content %}Hello {{ name }}{% endblock %}
&#39;;
$now = time();
$dbh-&gt;prepare(&#39;INSERT INTO templates (name, source, last_modified) VALUES (?, ?, ?)&#39;)-&gt;execute([&#39;base.twig&#39;, $base, $now]);
$dbh-&gt;prepare(&#39;INSERT INTO templates (name, source, last_modified) VALUES (?, ?, ?)&#39;)-&gt;execute([&#39;index.twig&#39;, $index, $now]);
</pre></div>
</div>
<p>We have created a simple <code class="docutils literal notranslate"><span class="pre">templates</span></code> table that hosts two templates:
<code class="docutils literal notranslate"><span class="pre">base.twig</span></code> and <code class="docutils literal notranslate"><span class="pre">index.twig</span></code>.</p>
<p>Now, let’s define a loader able to use this database:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>class DatabaseTwigLoader implements \Twig\Loader\LoaderInterface
{
    protected $dbh;

    public function __construct(PDO $dbh)
    {
        $this-&gt;dbh = $dbh;
    }

    public function getSourceContext(string $name): Source
    {
        if (false === $source = $this-&gt;getValue(&#39;source&#39;, $name)) {
            throw new \Twig\Error\LoaderError(sprintf(&#39;Template &quot;%s&quot; does not exist.&#39;, $name));
        }

        return new \Twig\Source($source, $name);
    }

    public function exists(string $name)
    {
        return $name === $this-&gt;getValue(&#39;name&#39;, $name);
    }

    public function getCacheKey(string $name): string
    {
        return $name;
    }

    public function isFresh(string $name, int $time): bool
    {
        if (false === $lastModified = $this-&gt;getValue(&#39;last_modified&#39;, $name)) {
            return false;
        }

        return $lastModified &lt;= $time;
    }

    protected function getValue($column, $name)
    {
        $sth = $this-&gt;dbh-&gt;prepare(&#39;SELECT &#39;.$column.&#39; FROM templates WHERE name = :name&#39;);
        $sth-&gt;execute([&#39;:name&#39; =&gt; (string) $name]);

        return $sth-&gt;fetchColumn();
    }
}
</pre></div>
</div>
<p>Finally, here is an example on how you can use it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$loader = new DatabaseTwigLoader($dbh);
$twig = new \Twig\Environment($loader);

echo $twig-&gt;render(&#39;index.twig&#39;, [&#39;name&#39; =&gt; &#39;Fabien&#39;]);
</pre></div>
</div>
</section>
<section id="using-different-template-sources">
<h2>Using different Template Sources<a class="headerlink" href="#using-different-template-sources" title="Permalink to this heading">#</a></h2>
<p>This recipe is the continuation of the previous one. Even if you store the
contributed templates in a database, you might want to keep the original/base
templates on the filesystem. When templates can be loaded from different
sources, you need to use the <code class="docutils literal notranslate"><span class="pre">\Twig\Loader\ChainLoader</span></code> loader.</p>
<p>As you can see in the previous recipe, we reference the template in the exact
same way as we would have done it with a regular filesystem loader. This is
the key to be able to mix and match templates coming from the database, the
filesystem, or any other loader for that matter: the template name should be a
logical name, and not the path from the filesystem:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$loader1 = new DatabaseTwigLoader($dbh);
$loader2 = new \Twig\Loader\ArrayLoader([
    &#39;base.twig&#39; =&gt; &#39;{% block content %}{% endblock %}&#39;,
]);
$loader = new \Twig\Loader\ChainLoader([$loader1, $loader2]);

$twig = new \Twig\Environment($loader);

echo $twig-&gt;render(&#39;index.twig&#39;, [&#39;name&#39; =&gt; &#39;Fabien&#39;]);
</pre></div>
</div>
<p>Now that the <code class="docutils literal notranslate"><span class="pre">base.twig</span></code> templates is defined in an array loader, you can
remove it from the database, and everything else will still work as before.</p>
</section>
<section id="loading-a-template-from-a-string">
<h2>Loading a Template from a String<a class="headerlink" href="#loading-a-template-from-a-string" title="Permalink to this heading">#</a></h2>
<p>From a template, you can load a template stored in a string via the
<code class="docutils literal notranslate"><span class="pre">template_from_string</span></code> function (via the
<code class="docutils literal notranslate"><span class="pre">\Twig\Extension\StringLoaderExtension</span></code> extension):</p>
<div class="highlight-twig notranslate"><div class="highlight"><pre><span></span><span class="cp">{{</span> <span class="nv">include</span><span class="o">(</span><span class="nv">template_from_string</span><span class="o">(</span><span class="s2">&quot;Hello {{ name }}&quot;</span><span class="o">))</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>From PHP, it’s also possible to load a template stored in a string via
<code class="docutils literal notranslate"><span class="pre">\Twig\Environment::createTemplate()</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$template = $twig-&gt;createTemplate(&#39;hello {{ name }}&#39;);
echo $template-&gt;render([&#39;name&#39; =&gt; &#39;Fabien&#39;]);
</pre></div>
</div>
</section>
<section id="using-twig-and-angularjs-in-the-same-templates">
<h2>Using Twig and AngularJS in the same Templates<a class="headerlink" href="#using-twig-and-angularjs-in-the-same-templates" title="Permalink to this heading">#</a></h2>
<p>Mixing different template syntaxes in the same file is not a recommended
practice as both AngularJS and Twig use the same delimiters in their syntax:
<code class="docutils literal notranslate"><span class="pre">{{</span></code> and <code class="docutils literal notranslate"><span class="pre">}}</span></code>.</p>
<p>Still, if you want to use AngularJS and Twig in the same template, there are
two ways to make it work depending on the amount of AngularJS you need to
include in your templates:</p>
<ul>
<li><p>Escaping the AngularJS delimiters by wrapping AngularJS sections with the
<code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">verbatim</span> <span class="pre">%}</span></code> tag or by escaping each delimiter via <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">'{{'</span> <span class="pre">}}</span></code> and
<code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">'}}'</span> <span class="pre">}}</span></code>;</p></li>
<li><p>Changing the delimiters of one of the template engines (depending on which
engine you introduced last):</p>
<ul>
<li><p>For AngularJS, change the interpolation tags using the
<code class="docutils literal notranslate"><span class="pre">interpolateProvider</span></code> service, for instance at the module initialization
time:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;myApp&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">[]).</span><span class="nx">config</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$interpolateProvider</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">$interpolateProvider</span><span class="p">.</span><span class="nx">startSymbol</span><span class="p">(</span><span class="s1">&#39;{[&#39;</span><span class="p">).</span><span class="nx">endSymbol</span><span class="p">(</span><span class="s1">&#39;]}&#39;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
</li>
<li><p>For Twig, change the delimiters via the <code class="docutils literal notranslate"><span class="pre">tag_variable</span></code> Lexer option:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$env-&gt;setLexer(new \Twig\Lexer($env, [
    &#39;tag_variable&#39; =&gt; [&#39;{[&#39;, &#39;]}&#39;],
]));
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="coding_standards.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Стандарты кодирования</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="deprecated.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Deprecated Features</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2021, OSCLab.com
            </div>
            Made with 
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Примеры</a><ul>
<li><a class="reference internal" href="#displaying-deprecation-notices">Displaying Deprecation Notices</a></li>
<li><a class="reference internal" href="#making-a-layout-conditional">Making a Layout conditional</a></li>
<li><a class="reference internal" href="#making-an-include-dynamic">Making an Include dynamic</a></li>
<li><a class="reference internal" href="#overriding-a-template-that-also-extends-itself">Overriding a Template that also extends itself</a></li>
<li><a class="reference internal" href="#customizing-the-syntax">Customizing the Syntax</a></li>
<li><a class="reference internal" href="#using-dynamic-object-properties">Using dynamic Object Properties</a></li>
<li><a class="reference internal" href="#accessing-the-parent-context-in-nested-loops">Accessing the parent Context in Nested Loops</a></li>
<li><a class="reference internal" href="#defining-undefined-functions-filters-and-tags-on-the-fly">Defining undefined Functions, Filters, and Tags on the Fly</a></li>
<li><a class="reference internal" href="#validating-the-template-syntax">Validating the Template Syntax</a></li>
<li><a class="reference internal" href="#refreshing-modified-templates-when-opcache-or-apc-is-enabled">Refreshing modified Templates when OPcache or APC is enabled</a></li>
<li><a class="reference internal" href="#reusing-a-stateful-node-visitor">Reusing a stateful Node Visitor</a></li>
<li><a class="reference internal" href="#using-a-database-to-store-templates">Using a Database to store Templates</a></li>
<li><a class="reference internal" href="#using-different-template-sources">Using different Template Sources</a></li>
<li><a class="reference internal" href="#loading-a-template-from-a-string">Loading a Template from a String</a></li>
<li><a class="reference internal" href="#using-twig-and-angularjs-in-the-same-templates">Using Twig and AngularJS in the same Templates</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=7e7bbc52"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="_static/scripts/furo.js?v=32e29ea5"></script>
    <script src="_static/translations.js?v=29b1f277"></script>
    </body>
</html>